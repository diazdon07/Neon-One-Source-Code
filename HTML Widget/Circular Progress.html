<style>
.circle-wrapper {
    position: relative;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}
.circle-wrapper svg {
    transform: rotate(-90deg);
    width: 100%;
    height: 100%;
}
.bg-ring {
    stroke: rgb(253, 253, 253);
    stroke-width: 17;
    fill: none;
}
.progress-ring {
    stroke: blue;
    stroke-width: 18;
    fill: none;
    stroke-linecap: round;
    stroke-dasharray: 880;  /* Circumference (2 * PI * R) */
    stroke-dashoffset: 880;
    /*animation: progress 0.8s ease-out forwards;*/
}
.circle-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: black;
}
.circle-content h2 {
    margin: 10px 0;
    font-size: 36px;
    color: black !important;
    font-weight: 900 !important;
}

.circle-content p {
    margin: 0;
    font-size: 16px;
    font-weight: bold;
}
@keyframes progress {
    to {
      stroke-dashoffset: 0;
    }
}
</style>
<div class="circle-wrapper">
  <svg viewBox="0 0 300 300">
   <circle class="bg-ring" cx="150" cy="150" r="140">
   </circle>
   <circle class="progress-ring" cx="150" cy="150" r="140">
   </circle>
  </svg>
  <div class="circle-content">
   <h2 class="count" data-target="11517">
    0
   </h2>
   <p>
    Guests Served
   </p>
  </div>
 </div>
<script>
  function animateCounter(element, duration = 2000) {
  let endValue = parseInt(element.getAttribute("data-target"));
  let startTime = null;

  function updateCounter(currentTime) {
    if (!startTime) startTime = currentTime;
    let progress = Math.min((currentTime - startTime) / duration, 1);
    let value = Math.floor(progress * endValue);
    element.textContent = value.toLocaleString();
    if (progress < 1) {
      requestAnimationFrame(updateCounter);
    }
  }

  requestAnimationFrame(updateCounter);
}

// Intersection Observer
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const wrapper = entry.target;
      const counter = wrapper.querySelector(".count");
      const ring = wrapper.querySelector(".progress-ring");

      // Trigger number counter
      animateCounter(counter, 2000);

      // Trigger circle animation
      ring.style.transition = "stroke-dashoffset 2s ease-out";
      ring.style.strokeDashoffset = "0";

      observer.unobserve(wrapper); // run once
    }
  });
}, { threshold: 0.5 });

document.querySelectorAll(".circle-wrapper").forEach(wrapper => {
  observer.observe(wrapper);
});
</script>
